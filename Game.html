<!doctype html>
<html lang="en" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XO-game</title>
  <style>
    :root{--bg:#081426;--panel:#0f2340;--accent:#ffd166;--accent-2:#6ee7b7;--muted:#b8c6d6}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, "Noto Naskh Arabic", system-ui, Arial; background:linear-gradient(180deg,var(--bg),#041226);color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:18px}
    .card{width:720px;max-width:96vw;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.03));border-radius:14px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:20px;margin:0}
    .meta{color:var(--muted);font-size:13px}
    .board{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;background:transparent;padding:18px;border-radius:10px}
    .cell{aspect-ratio:1/1;border-radius:8px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:800;cursor:pointer;transition:transform .12s ease, background .12s ease}
    .cell:hover{transform:translateY(-4px)}
    .cell.x{color:#ffd166}
    .cell.o{color:#6ee7b7}
    .info{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:12px}
    .status{font-weight:700}
    .controls{display:flex;gap:8px}
    button{background:var(--accent);border:none;color:#08101a;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .footer{margin-top:12px;color:var(--muted);font-size:13px;display:flex;align-items:center;justify-content:space-between}
    .winner{padding:8px 12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,209,102,0.12), rgba(110,231,183,0.06));color:var(--accent);font-weight:800}
    @media(max-width:480px){.cell{font-size:36px}.card{padding:12px}}
  </style>
</head>
<body>
  <div id="startScreen" style="position:fixed; inset:0; background:linear-gradient(180deg,#081426,#041226); display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; color:#ffd166; font-family:Inter, 'Noto Naskh Arabic'; gap:20px;">
    <h1 style="font-size:32px; margin:0;">Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³-Ø£Ùˆ</h1>
    <h2 style="font-size:24px; margin:0; color:#fff;">Ø¹Ù…Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø©: <span style="color:#ffd166; font-weight:900;">Ù†ÙˆÙ Ù†Ø§Ø¬ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ</span></h2>
    <button onclick="startGame()" style="background:#ffd166; color:#081426; padding:12px 26px; font-size:20px; border:none; border-radius:10px; font-weight:900; cursor:pointer;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
  </div>

  <div class="card" role="application" id="gameCard" style="display:none;">
    <header>
      <div>
        <h1>Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³ â€” Ø£Ùˆ (Ø«Ù†Ø§Ø¦ÙŠØ©)</h1>
        <div class="meta">Ø§Ù„Ø¹Ø¨ Ù…Ø¹ ØµØ¯ÙŠÙ‚ Ø¨Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø² â€” Ø®Ù„ÙŠ ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠÙ„Ø¹Ø¨ Ø¯ÙˆØ±Ù‡</div>
      </div>
      <div class="meta" style="font-size:20px; font-weight:900; color:#ffd166; text-shadow:0 0 10px rgba(255,209,102,0.6);">Ø­Ù‚ÙˆÙ‚: <strong>Ù†ÙˆÙ Ù†Ø§Ø¬ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ</strong></div>
    </header>

    <main>
      <section class="board" id="board">
        <!-- 9 Ø®Ù„Ø§ÙŠØ§ ØªÙˆÙ„Ø¯ Ø¨Ø±Ù†Ø§Ù…Ø¬ÙŠØ§Ù‹ -->
      </section>

      <div class="info">
        <div class="status" id="status">Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨: <span id="player">X</span></div>
        <div class="controls">
          <button id="restart">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
          <button class="secondary" id="resetScore">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø·</button>
        </div>
      </div>

      <div class="footer">
        <div class="scores">Ù†Ù‚Ø§Ø· â€” X: <span id="scoreX">0</span>  |  O: <span id="scoreO">0</span></div>
        <div class="hint">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø®Ù„ÙŠØ© Ù„ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…ØªÙƒ â€” X ØªØ¨Ø¯Ø£ Ø¯Ø§Ø¦Ù…Ø§Ù‹</div>
      </div>
    </main>
  </div>

  <script>
    // Ù„Ø¹Ø¨Ø© Ø¥ÙƒØ³-Ø£Ùˆ Ø¨Ø³ÙŠØ·Ø© Ø«Ù†Ø§Ø¦ÙŠØ©
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const playerEl = document.getElementById('player');
    const restartBtn = document.getElementById('restart');
    const resetScoreBtn = document.getElementById('resetScore');
    const scoreXEl = document.getElementById('scoreX');
    const scoreOEl = document.getElementById('scoreO');

    let board = Array(9).fill(null);
    let current = 'X';
    let running = true;
    let score = { X: 0, O: 0 };

    const wins = [
      [0,1,2],[3,4,5],[6,7,8], // ØµÙÙˆÙ
      [0,3,6],[1,4,7],[2,5,8], // Ø§Ø¹Ù…Ø¯Ø©
      [0,4,8],[2,4,6] // Ù‚Ø·Ø±ÙŠØ§Øª
    ];

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const cell = document.createElement('button');
        cell.className = 'cell';
        cell.setAttribute('data-index', i);
        cell.addEventListener('click', onCellClick);
        cell.setAttribute('aria-label', 'Ø®Ù„ÙŠØ© ' + (i+1));
        boardEl.appendChild(cell);
      }
      updateStatus();
    }

    function onCellClick(e){
      const idx = Number(e.currentTarget.dataset.index);
      if(!running) return;
      if(board[idx]) return; // Ù…Ø´ ÙØ§Ø¶ÙŠØ©
      board[idx] = current;
      e.currentTarget.textContent = current;
      e.currentTarget.classList.add(current.toLowerCase());
      checkResult();
      if(running) switchPlayer();
    }

    function switchPlayer(){
      current = current === 'X' ? 'O' : 'X';
      updateStatus();
    }

    function updateStatus(msg){
      if(msg){
        statusEl.innerHTML = '<span class="winner">' + msg + '</span>';
      } else {
        playerEl.textContent = current;
        statusEl.textContent = 'Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨: ';
        statusEl.appendChild(playerEl);
      }
    }

    function checkResult(){
      for(const combo of wins){
        const [a,b,c] = combo;
        if(board[a] && board[a] === board[b] && board[b] === board[c]){
          // ÙÙˆØ²
          running = false;
          highlightWin(combo);
          updateScore(board[a]);
          updateStatus('ÙØ§Ø² Ø§Ù„Ù„Ø§Ø¹Ø¨ ' + board[a] + ' ğŸ‰');
          return;
        }
      }
      if(board.every(Boolean)){
        running = false;
        updateStatus('ØªØ¹Ø§Ø¯Ù„ ğŸ¤');
      }
    }

    function highlightWin(combo){
      combo.forEach(i => {
        const cell = boardEl.querySelector(`[data-index="${i}"]`);
        if(cell) cell.style.boxShadow = '0 6px 20px rgba(0,0,0,0.6) inset, 0 6px 20px rgba(255,255,255,0.03)';
      });
    }

    function updateScore(winner){
      score[winner] += 1;
      scoreXEl.textContent = score.X;
      scoreOEl.textContent = score.O;
    }

    function restart(){
      board = Array(9).fill(null);
      current = 'X';
      running = true;
      // Ø§Ø²Ø§Ù„Ø© Ù†ØµÙˆØµ ÙˆØ§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª
      const cells = boardEl.querySelectorAll('.cell');
      cells.forEach(c => { c.textContent = ''; c.classList.remove('x','o'); c.style.boxShadow = ''; });
      updateStatus();
    }

    restartBtn.addEventListener('click', restart);
    resetScoreBtn.addEventListener('click', () => { score = { X:0, O:0 }; scoreXEl.textContent = 0; scoreOEl.textContent = 0; });

    // Ø¯Ø¹Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯: R Ù„Ø¥Ø¹Ø§Ø¯Ø©ØŒ S Ù„Ù…Ø³Ø­ Ø§Ù„Ù†Ù‚Ø§Ø·
    window.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase() === 'r') restart();
      if(e.key.toLowerCase() === 's') { score = { X:0, O:0 }; scoreXEl.textContent = 0; scoreOEl.textContent = 0; }
    });

    function startGame(){
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('gameCard').style.display = 'block';
    }

    // Ø¨Ø¯Ø§ÙŠØ©
    createBoard();
  </script>
</body>
</html>
